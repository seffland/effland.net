<!DOCTYPE html>
<html lang="en" class="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Projects - Effland.net">
        
    <!-- Favicon -->
    <link rel="icon" href="../favicon.svg" type="image/svg+xml">
    <link rel="alternate icon" href="../favicon.ico" type="image/x-icon">
    
    <title>Projects - Effland.net</title>
    <link rel="stylesheet" href="../dist/output.css">
    
    <!-- Dark mode script -->
    <script>
        // Check for saved theme preference or prefer-color-scheme
        if (localStorage.theme === 'dark' || 
           (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
        } else {
            document.documentElement.classList.remove('dark');
        }
    </script>
    
    <!-- Theme toggle functionality -->
    <script src="../js/theme-toggle.js"></script>
</head>
<body class="min-h-screen flex flex-col bg-background dark:bg-gray-900 dark:text-white transition-colors duration-200">
    <header class="bg-primary text-white py-8 text-center relative">
        <!-- Theme toggle button -->
        <div class="absolute right-4 top-4">
            <button id="theme-toggle" type="button" class="text-gray-200 hover:text-white p-2 rounded-lg text-sm">
                <!-- Sun icon -->
                <svg id="theme-toggle-light-icon" class="hidden w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" fill-rule="evenodd" clip-rule="evenodd"></path>
                </svg>
                <!-- Moon icon -->
                <svg id="theme-toggle-dark-icon" class="hidden w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path>
                </svg>
            </button>
        </div>
        
        <h1 class="text-3xl font-bold mb-4">My Projects</h1>
        <nav>
            <ul class="space-x-4">
                <li class="inline-block"><a href="../index.html" class="text-white hover:text-secondary transition-colors">Home</a></li>
                <li class="inline-block"><a href="projects.html" class="text-white hover:text-secondary transition-colors">Projects</a></li>
                <li class="inline-block"><a href="weather.html" class="text-white hover:text-secondary transition-colors">Weather</a></li>
                <li class="inline-block"><a href="movies.html" class="text-white hover:text-secondary transition-colors">Movies</a></li>
                <li class="inline-block"><a href="contact.html" class="text-white hover:text-secondary transition-colors">Contact</a></li>
            </ul>
        </nav>
    </header>

    <main class="max-w-4xl mx-auto px-4 py-8 flex-1 dark:bg-gray-900">
        <!-- GitHub activity section - simplified approach -->
        <section class="bg-white p-6 rounded-lg shadow-md mb-8 dark:bg-gray-800">
            <h2 class="text-2xl font-bold text-primary dark:text-white mb-4">GitHub Activity</h2>
            <p class="text-gray-600 dark:text-gray-400 mb-6">My open source contributions:</p>
            
            <div class="text-center mb-6">
                <a href="https://github.com/seffland" target="_blank" class="inline-flex items-center gap-2 bg-gray-800 hover:bg-black text-white px-4 py-2 rounded-md transition-colors">
                    <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                    </svg>
                    View my GitHub profile
                </a>
            </div>
            
            <!-- GitHub contribution image using GitHub's own contribution graph endpoint -->
            <div class="github-contributions-container">
                <h3 class="text-lg font-medium text-primary dark:text-white mb-4">Contribution Graph</h3>
                <div class="bg-gray-100 p-4 rounded-lg dark:bg-gray-700 flex justify-center">
                    <img 
                        id="github-contributions" 
                        src="https://ghchart.rshah.org/seffland" 
                        alt="GitHub Contributions" 
                        class="max-w-full h-auto" 
                        style="filter: brightness(1) contrast(1);"
                    >
                </div>
                <p class="text-sm text-gray-500 dark:text-gray-400 mt-2 text-center">
                    Chart showing GitHub contributions over the past year
                </p>
            </div>
            
            <!-- Recent repositories -->
            <div class="mt-8" id="recent-repos">
                <h3 class="text-lg font-medium text-primary dark:text-white mb-4">Recent Repositories</h3>
                <div class="loading-spinner text-center py-8" id="repos-loading">
                    <svg class="animate-spin h-8 w-8 mx-auto text-primary dark:text-gray-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                    <p class="mt-2 text-gray-600 dark:text-gray-400">Loading repositories...</p>
                </div>
                <div id="repos-list" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
            </div>
        </section>
    </main>

    <footer class="bg-primary text-white text-center py-4 mt-auto">
        <p>&copy; 2025 Effland.net. All rights reserved.</p>
    </footer>

    <!-- Custom script for GitHub data -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Apply dark mode to GitHub contribution graph if needed
            applyDarkModeToContributionsGraph();
            
            // Listen for theme changes to update the graph
            document.getElementById('theme-toggle').addEventListener('click', function() {
                // Wait briefly for the theme to change before updating
                setTimeout(applyDarkModeToContributionsGraph, 100);
            });
            
            // Fetch GitHub repositories
            fetchGitHubRepos();
            
            // Function to apply dark mode to contributions graph
            function applyDarkModeToContributionsGraph() {
                const isDarkMode = document.documentElement.classList.contains('dark');
                const contributionsImg = document.getElementById('github-contributions');
                
                if (isDarkMode) {
                    // In dark mode, invert the colors and adjust brightness for better visibility
                    contributionsImg.style.filter = 'invert(0.85) hue-rotate(180deg) brightness(1.5) contrast(1.2)';
                } else {
                    // In light mode, use normal colors
                    contributionsImg.style.filter = 'brightness(1) contrast(1)';
                }
            }
            
            // Function to fetch GitHub repositories
            function fetchGitHubRepos() {
                fetch('https://api.github.com/users/seffland/repos?sort=updated&per_page=4')
                    .then(response => {
                        if (!response.ok) {
                            throw new Error('GitHub API request failed');
                        }
                        return response.json();
                    })
                    .then(repos => {
                        // Hide loading spinner
                        document.getElementById('repos-loading').style.display = 'none';
                        
                        // Show repositories
                        const reposContainer = document.getElementById('repos-list');
                        
                        if (repos.length === 0) {
                            reposContainer.innerHTML = `
                                <div class="col-span-full text-center p-4 bg-gray-100 dark:bg-gray-700 rounded-lg">
                                    <p class="text-gray-600 dark:text-gray-400">No public repositories found.</p>
                                </div>
                            `;
                            return;
                        }
                        
                        repos.forEach(repo => {
                            // Create card for each repository
                            const card = document.createElement('div');
                            card.className = 'bg-gray-100 dark:bg-gray-700 rounded-lg p-4 hover:shadow-md transition-shadow';
                            
                            // Format date
                            const updatedDate = new Date(repo.updated_at);
                            const formattedDate = updatedDate.toLocaleDateString('en-US', { 
                                year: 'numeric', 
                                month: 'short', 
                                day: 'numeric' 
                            });
                            
                            card.innerHTML = `
                                <h4 class="font-medium text-primary dark:text-white">
                                    <a href="${repo.html_url}" target="_blank" class="hover:underline">
                                        ${repo.name}
                                    </a>
                                </h4>
                                <p class="text-sm text-gray-600 dark:text-gray-400 mt-1 line-clamp-2">
                                    ${repo.description || 'No description available'}
                                </p>
                                <div class="flex items-center mt-3 text-xs text-gray-500 dark:text-gray-400">
                                    ${repo.language ? `<span class="mr-3">
                                        <span class="inline-block w-2 h-2 rounded-full bg-blue-500 mr-1"></span>
                                        ${repo.language}
                                    </span>` : ''}
                                    <span>Updated on ${formattedDate}</span>
                                </div>
                            `;
                            
                            reposContainer.appendChild(card);
                        });
                    })
                    .catch(error => {
                        console.error('Error fetching GitHub repos:', error);
                        document.getElementById('repos-loading').style.display = 'none';
                        document.getElementById('repos-list').innerHTML = `
                            <div class="col-span-full text-center p-4 bg-gray-100 dark:bg-gray-700 rounded-lg">
                                <p class="text-red-500 dark:text-red-400">
                                    Unable to load repositories. Please try again later.
                                </p>
                            </div>
                        `;
                    });
            }
        });
    </script>
</body>
</html>